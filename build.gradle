buildscript {
    ext {
        APK_NAME = "MoreApps"
        targetSdk = 32
        minSdk = 19
        libraryVersion = "2.2.0"
        libraryVersionCode = 17
        renameOutputs = { variant, output, outputName ->
            outputFullName = "${outputName}-${variant.name}-${new Date().format('dd-MM-yy_HH-mm')}"
            if (!variant.getName().equals("debug")) {
                output.outputFileName = "../" + "${outputFullName}.apk"
            }
            if (variant.getName().equals('release')) {
                variant.assembleProvider.get().doLast {
                    outputFullName = "${outputName}-${variant.name}-${new Date().format('dd-MM-yy_HH-mm')}"
                    if (variant.mappingFileProvider.get() != null) {
                        copy {
                            from variant.mappingFileProvider.get()
                            into output.outputFile.parent
                            rename { String fileName ->
                                "${outputFullName}.txt"
                            }
                        }
                    }
                }
            }
        }
    }
    repositories {
        google()
        jcenter()
        mavenCentral()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:7.3.0-alpha03'
        classpath "org.jetbrains.dokka:dokka-gradle-plugin:1.6.10"
    }
}
plugins {
    id("io.github.gradle-nexus.publish-plugin") version "1.1.0"
}
apply from: "${rootDir}/scripts/publish-root.gradle"
allprojects {
    repositories {
        google()
        jcenter()
        mavenCentral()
    }
}
task clean(type: Delete) {
    delete rootProject.buildDir
}